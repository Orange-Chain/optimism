package sources

import (
	"encoding/json"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestRPCHeaderHash(t *testing.T) {
	tests := []struct {
		name string
		data string
	}{
		{
			name: "pre-shapella",
			data: `{"number":"0x8414fa","hash":"0x1469313981cb69286cbfbda5c4e9e02018ca6b091939e99cb888ff3fc5ae8cb7","transactions":["0xf85d66b41623d5b8e690a40caa22d3929f291f5b9fa2f0156350b8b52ff58c1e","0xfbde297d4ca2704fcde80014f7801e07a74139ad20698514a638c39b5e5cea61","0x18aab959acab0aeec3ac5022120c64731d760e4a03a02abb2e600f92a885d1df","0x126b757bee1d649c023b1c813893b08a8369422ec7c23ea49f38a99dcf6067d9","0x7492d7e1acdd052fcbe581a39682c2c8f774d20c7cb6ace17868a1f6afbfbfb0","0x5ddcff6942dc0ce945698a83d845f7c844e9b1bbca8bc1c37b947c1f6153de91","0x9abff46fd72c22c596f11bc83b6b09e8c066067ca974deb805559e24303a1435","0xf7740151c2b1f51c1e3dbd851ec537beee988b5575aa47c5426d1b4b6942e59e","0xcfefb23b29c9a7c4e6691887d7eb3e6ae7a8b8e232eb88bf84147ceaf7bbcccc","0x1f169a0b43b9757a5688ba14ab6cb1fe76156fe7a4e13202562865c9c58f22f6","0x2ce3b0b15abfdac2dcb64da1687f4704f96117ee7ca60438a1785f45b8ca8980","0x236229dccc64b5e1b622df155bebd21bfef0fe904a0e3b708c8abe5948f9ce09","0x4ac45bc326318213860a10d136e33ba083b1d93d84e0bfeeb443f39dba52864c","0x8007c0c055fddb6bc7b4999d3b3fb1d2af8940abda5783ebbaf67add6ba72dd5","0x1a8ff53ce489c99c51770ae3aa2e1b61d7bf90cde3fd11f21935c1c53b2fcdc3","0x2815e71fe06230cdab29ec705e185b587655dab0169f2eefe1073ca273c678f7","0x2a76ab3939c31961e0f44c712a6dc2cc5b62f47092754e705a0744e840afcc81","0x957802267a820bd675fb3846953dbc95476dfa2d83b8f9cc539728b8f3898c9b","0x015ada228a9ec77726db2e81860b485ac2f256c81b3b9410256b1c4f4e3fbd8e","0xb336c813f5d27a19d1c6ff9efcfc62f957bc05bc2656e5ea2a8b2b387a42a3d5","0x271f36d1f9b40a3f350a53a7b795404cb37e519d4b251429c5c9df42e79035cf","0x41c65125501ab0785bcd4577333e49d143221b93ab0ac4b2013ecf868f060469","0x5ddd6e0bef538a831ea212e8748c907675f31e84cb98182b4dfa4be3eb53cf77","0xd640051dcdedcc2907fee7b833782ae76a0e9ac8473bb06c9590736194def785","0x47e75e2ef5c57e66600a3a3a568ce1301a4ee525317890c64796b2bc8038bfbe","0x6af5f758255ef2786dd9a36ffae1c12f099362dd0a1cdb8baead068d6129151a","0x0dc8b65755b829d8143277775fdba806c1eaaa9c952002a3520e6359a5a3786c","0xcf121c4ba3d40269f544b1042f0e72fa20c6d8797ad2f81282c8a1546cec6cf3","0x88ecdf074b5a9bf4c8ae02df97e432555c70f4dac3dfed9c951409eab01ec67e","0x9ced59fb5f289dff3c9e8c614385614cbf60fc1469191d7a27fe449b47ad7e77","0x8dd37a9965395d2dd4f54655249c69359df12a636db8fddb3841db5012d99063","0x03599b374a1021eda5aca8bb514527c88cf951ce1e2f77e1009501156eb15982","0xa32a8212ceb9d002f2b2c4baeead474f231be6ee61d3381b24882351713df407","0xb26dcab253b6e3fafb3210c516c71cb8f18d95127d020c1bb0b9f047ae9721a3","0x60d50c38d0d8e1feabbdb2a2fce1ad8933dcb40c796b29625d2da730004a8bd9","0x97a854d28505de5e7a671008b2802794990036351af0a389289baf3976b746ea","0xe0eb0ed52a0fa2d081f041dff1f03a6eeb5b83d874314e53f121a619f4c3d31d","0x53929b4ec6d736b76a62e64126cca895383bd6bc2558552f8ca9a7f1132d72e4","0xb629e345ff18a5850f35ec8e8f0183c1186cf85ce8f4db1003c71c8cd1803d0c","0x92bfa401c58d443ca29d72cf2b0634332858e426a54d4967c58fc69189594280"],"difficulty":"0x0","extraData":"0x6665622d6275696c646f72","gasLimit":"0x1c9c380","gasUsed":"0x714351","logsBloom":"0x820620042000540000100002301301800021820010040004104800105002301202a0c1400804000400980000110d0180020411400200192000005a20507220040a8050109444e0004200230b020033012444040005a03001a0588984420101009000220012848028020002a72000890609480ae240c2408220290051100040402b426130e10080082600292000008010048008080c0000002003010040820186020110021922c1100c81242204880200244402102c0004201180410606000a050022484210080040300000130daa6221108811010008641c004431008002a100445c302810102d10a0420001f2100106015002230800200081013906001840c2","miner":"0x4e0100d71ad71940c95710888e1d2501f72c823e","mixHash":"0x6d85ff41181ffabc5d65c5e48c547dadffe020e80892d2f63faf571006f29170","nonce":"0x0000000000000000","parentHash":"0x1f120a6ce50aa0f9b4b61f92cc7f62626b7d67d973570d84f586d0e3e05e5f34","receiptsRoot":"0x853976120a04dffb972314e86e6e2251a95c19160135dcd93e34640c98fb9eaf","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x1dc6b","stateRoot":"0x3fda6e74a8fab99eeadf1602504dc13c7fc6034eb373ed0dca3db21153d0af5f","timestamp":"0x6410f454","totalDifficulty":"0xa4a470","transactionsRoot":"0x7e29452d3278cfb53a43e85f69edfe48afa298612a6ef45a15f404134ac6372a","uncles":[],"baseFeePerGas":"0xc1f084af"}`,
		},
		{
			// TODO: JSON RPC providers are not yet returning the withdrawals root
			name: "post-shapella",
			data: `{"number":"0x8414fb","hash":"0x4fed6603f749a4bd18a5e3cd21922327a18b20167d084e9e25a36e0a3ffcb334","transactions":["0x315b9454ffae8bca6a608443f7776adaa492defafc1863690934601e1cebd410","0x3bb3ca785d846521485b076d6c2274e3c13d17fa4a33ace80e7529cf652d1161","0x77a22eaef789e863d4026c8bcce5fe1a992f2d3670350a5b07369300d7bdb04c","0x5c19f1bb3844823baabd440ecd386bae203ccb746e0c47cbdb5ddc64cce721b5","0xf031da3e3aeea4120f4227db7ce963af19b65182e5b3c2f821573d3a44fb0fac","0x4e07dc28fa9d5832e80ffbe239294717973a5627dbe6a749620fcfe1c1c311fc","0xf0f1ad33b283505961d6cb3dd16ed15db6464868f93dfaf55ef17666bbd554fa","0xc2d89ae640bdaf02d7d9de83d23770f5d22265bd71d45cce256cf7ea770e635e","0x5503d427c7960f82ad3fc0b1b64fe42dff10be286af178b7fcc85ad4a5cf8a3f","0x4f3f1cd671f610c9660a073a773b8b07448a73f4a3475255a279f2cd143c2da9","0x13900b04dcd705a6c3db235990c1a66bb07592a9c47177dc586922c45e447c8b","0x7fce6f7603107d123139648607419d0ecdc8fe49ae6b9a5d21f8b1d7119c133a","0x614c00f2edf7e78f2eaf037421577d141e6fe434014055fcf7c262c60210877b","0x4e644f1a082f17b32a36bb2c00581bd8e596c019901c11316e918b5149a49c7d","0x5af53d993806c3137ef108ac70390806059e43dabc147c0a1fae2e332ca483f7","0x40fcdffdcabb19397dc80f8779c5376673bdf0853a91eb16f70ba50fb0892df1","0x6b37b67f3ab2612568cb9390106a376cf29b24420a41428e3b6f0def466860fe","0x73bce49728c08b6a732af1a64beb4e3de0d22256d1550f0e14d7c17096946d20","0xd35c3ecf3cd5d97bad07ef68e5f7ccb628d3edc6ba8c785ec90e7df1c5ff42bc","0x0eb7cd615174aa6d848b7fe3464658e324c1ad3073ffbdc9ca97672d2f824d47","0xbe2c9fa78ce5171e17fcb37d2e3053d8b65e9f7a61a03738a1f3708eab78622a","0xca26b1a36fe3515b41a527655da87993b83052a771b49359a881430143b231f5","0xd3ae27f28010aa6d879b4e80275bf205f3e5724dde5bcb72a838abe88981a7df","0x8b9811faadafc6fcc1cfff25ac984e8c03ace08d610e52b32baa83a8ae76e9a3","0xefd1a0217213824b711dbbca36931145dd40a7291c69d660953c4459d716f8dc","0x7739daa2de288cc775e316ce6422c74ad63bb212a73ae42483f8c6d49501d5ce","0x6b8537512fcadcc7ec535dd67570b95f1fcdd607c01889ad486604f2baa3d619","0xaf9d92e589db6313d06093568408f2c43061043b5faf761335b46cc5d009de8d","0xa354570afdee424dbf867e1100551db9fdfb79688e975c878293c24473c5e32e","0x734c223be7215bc83783bab716568befae74b42e1da0c6ffd4010e548da1cda7","0xc0a2c38c135a2a41837759e1aeb7de7fb880dd795ed32f0deacc22efa0a9e5ad","0x7871435979eb28861690135d8dadfd7a7dc9f56b0bb8b8bfd00fdda169157f51","0x2a6dcba5e4db1132ffcac95de4dbef3289a133af5b39df9705e58f7be634b3c8","0xda97252c72c45e778774c6cfe737757a8d113191848b09f972ed2d1bbe23dd73","0x9914a3d974864af086b4814627b86c54d554df57f88cfd15a7e8af142f0c9a1d","0x7daf04ba527e3bb8f06c3d8cf97e3aa335736d03098abb870cd4ece7a33cfecd","0x714eeff35374e51566d95d668e2e8fe335207a91e108572936b216f0fd252885","0xaad16e187b5be755e84417cd11aa76ea3c69f243ad3b2e02b7ad30b59cf1e988","0x3937b60da59e640e1180b27d8ad50ea6b706e30aa20650cf47c7e13b8d569e99","0x4ecbe8a24c35435bd83bf1a7649731c55775425181bfc392d2ca9697438e1aad","0x8a7a2b6a2d946972d5b5a6571899a0152ad210a4c7e8a0d356b4524afa539c6e","0xe0634c529a5d428c30e9c17984a655a13d939281b4d55d58f2e8fc2ecaeacc09","0x9aa63d568faeb4be168d92069b18dc976893ef3c83b4c9a3072e1c82b81d8c82","0xe1d759542d8f00a5c6e4a1d363781ba62737ea468fccf3601bd413f19ddf8175","0x7a515e3e92a43d3b7c4f4c9d2de65781504bcdaf2a71474afb4c5fc27858bc87","0x2ed4355434f3268f85015df94e9d90d69ccb657035283bdf33ecb26640f8174d","0x07266d94d8c4dd55de3d4904050c698bb6c8382eb13a5363a3c772009e983f19","0x83964bd6a88ec1f4577249c1387c82650ff0f01140fb70d5df65af4f32550055","0xda29e8648051c2a80e7507232a25bfa54d8923813fcdfce150c6a4e4aa37e91a","0x8e309dc4d3ca2f3536f8404908d766c6f0e23065ef3fad11b8ebc0f2e36be9a4","0x831cc4c95d8ef8de3e6bd8ac96480fd64b008ba0d43d15aecec76f3d6a320190","0x8e177e86170caf65cb074e4ccfa20d64c419231f6ae2fd207c3a08be323650d8","0x2febe5716216d11e90a9a7b41af183b74ebe37595fbb2d3fc1377c5ebe42578f","0x42e8c27fa8499874325bd33b8ff7c7e4cd6dc86ad080420cf5a989f0e54f9182","0xd8178ceca8e2d86d94c62208a3473c626a83ff07f651af99032eadfa1d6e5bd8","0xbbeb67368b797e32d3814e7707f76c4dbcd30451e9915dc4d71f75552a309362","0xbefefbf93fdc141e67ab89bc2f1fb6cb892b14f34524dd0be3b834f9baffdec7","0x1bf0f9dd95c4e8e132edb7fd7ff0bd489cbcc104cf606dd1173e2d138e9ede06","0x4a68c54b86b66bfb9667cb5bdbccb66edfeb49ab2ef72521fbb34b862aeb34bc","0xc293a0866095c5659c603444e1c54e49085d1d2f8c988612e863321f4c51dac4","0xec9d907c6e353fe4a9f84027f75be12bf124dd88c82cb46590584bfd785390e8","0x4d6232f7967e0ef9b357c27a3ba25a1c6a9085e75b6c10efde801c0adb3aba3e","0x845bfcbcd365eb76773e12ac557d85272581514e3564bc082d12a7b0be3ace77","0xbfe01329cbeaa14796ca3122fc3b21019ce685d0c6f637062625856230aa533c","0xcd29e1723016a82bb91a5e6df3dd4ac3d28fd611d10b810dae3c5be2b8a0774c","0x526f2d235f3cd9e65cf9481500182345326e538fec7270464746aa9c0566dcea","0xd826b9eeb26bc2b19b41a0b69f99668ccab9956948b121856c428839a030c495","0x310c1845139c5eb81cd80005b88d5bf51805bf54f677538d346549e5e71e3eca","0xd0a5fcdf2462aaca8da6ec650685f25dd45eddba83be9f2d8599c0bc8adf6666","0x19e5f100f5ddede4d583268aed10a17198786376c3b69d256e608a123d853bdf","0xefe442d3489d03e2055d29d06660f829b43043f24b59ddf60a87d09138b539ab","0xa261e4f62674b85af6a854bfa539c5b521fd535bbafad327189c0c7e1da9e0cb","0xc11474645af8b59576237c6de403b2bd65f73051388a49f4c0b447e93200e57c","0x99fbd706878393243bd6f30b4447fdac1b3027d6d71998d0f75121b806d8f78d","0xee4b2d3b85f97b3c72c18961b6735ec16bc55111921a5c4f66d983006af97985","0xc955a3f05ea08a23a9c3a67f50d8a131bd6e35b3a07dc97e10d6a664c2679a80","0x540d87abf2c95bdc9185292bd529a09c4d7688b04c719a38ec1d2267c1c564aa","0x2f28beb97ed2f708f0e726369a3f6b6ff4d2f8812c3bc3a2e3614e69055ded13","0x288a76bbd8702283c02d1b1ff3a4c2541db2aea35e4441797d053bdd1ef2ee29","0x031cc4ab9d26f0a2193b9e41f7602e7edb65bf053818454a7b24c9f4011bfb71","0x3cf7f15cac7a0423a9ef32f7541ccafd7f1923b158e6ece9428eaed4062c6d32","0xadd9e84f3f02287a1792e48655dd3af4b4ad4f78b452732b9e06f50754335139","0x1298ed49ae6ffbaff3e46c6025d4afe2338e36cc51b1bd4333d3aa774330a744","0xb2bd5510415b7dde88388c01f7b48c22abe460ed7a47ceb45aa1170b1c0622d6","0xa0a2510a87cad9fa033148c95fe7001463386c87eb76568b2ab2b5ee413c5573","0xe666f6dede5f293e2cfc022d20943eaa10f5c3b22b5818721e84ace27cbeb35c","0x2140623c597258bbb8abcae5bd6b46306fa50742ab5bb6742bb569ba9f06f63d","0x1219bd44e8a2bc71e432f1027ffdf042a6ca5cce48310a50e534a3326038b42c","0x8231f1f36a0cdd9a1a2e94aaa0d4b6dbaeaf6d7788e3123cb750a25768df1487","0x670106dc2b94284d0dd769e9f624ec066cd6c5d50182ee14a2b23066a38d8d0b","0x95bece1bee01b8074b571f3ded37da4a4030f582106ebfadd693d2037fb3c163","0x34f66639fcf51952d379726f0888954c104b533fd135d1b1e610f96ed8ac9cd6","0x1248e94e62bcf411b0da55ff76e1c0a06c1ead0ce3e4abc7b7a9adcda3df85e8","0x1e1b5a51bd13974392a2f539a8b3d249292e8dbe4d60bddbdbe9b7bbda193e7c","0x5ed1970c430ff533233175c0ec83bf20178fd5a2f9e5881c54b8f44854128c24","0x637ff9c2f0bc534eb3e85998b3c9f5a9c5f1ec049ccab0ffa63ff30312fa5c0f","0xeac8873ef6409e289426d6b1d1f028081d744ab71a6c029eeec471d71e8593e5","0x825e89a6bd539af0e07bf6551f5272ee7f86ffb385ced920556fd7f26ce7d602","0x142f1d0b41f7e29f97bb26e5961a5b8aaf2d335884f4c6fa9c58200227258220","0x15acfc2e6254f709eef6fc62ee2f0e2be784bab9c15354ca676532b3d8a4f5cd","0xa0a28eb578d6fbd34eaf1f859e70601ec6576efa136d19777ab42f0bb74ccc4d","0xa53ee61e93895ac00be273f490be535811a858b802570def1ae958f9c5ec2054","0x26a7cb6bd4258f08fbe9492dc7a9b553137edf7c5062047b2173f4cb00120dd9","0xd692f7c362de71d625e4652953ca814548259be6cb3f048b2d3c88aa9d3fa24c","0x7d497839ea641feec862b78f76ea11788f3efe0e039a1f3c628d1d53aa058d73","0x6778b925ebee5e6c5fd60b643ff4071ea1d0bef1ed6304193b26aab27a672a30","0xd420d59abc49e09a5e992cb9b0703537b16445dcc7eb277222cc2aeb139dbde1","0x4b68f3fc1e7231ec45facf2080a6a0c115f5cd21f5337e4b4d616af0f585120b","0x3faa9d43ff9de3eb4b820f69dc5c1cc1019419dc0998aef9331072ab7343b185","0x3b607ef6e5bf97cb93c115fc9cf24f30bd93e92697c9a1f9d571c33d05289c84","0x2761bb587f628aa6d13c8b7e58c62f12a033bc70cb1c8e540254737f637228f5","0x0ca04ae8cbc965d74aa0909dd584b7be38027fc446e9fa4f0302afe235e4184c","0x9f075b4cca8ba99313caf6818d0306be04b8d58b160beff17fb6539e0c530432","0x440c836573783316b5de04de25f4b3e14364d45a757143045f78787983b19926","0xb806679399d10784b83964bee11cbd70e196d5f614037e1033ab8565fc6bdac5","0x16e199b3e8b9707088bc67d63aae9ad5eb2ab21a34d2139e21ed56bab42033fb","0x1e8d9889c7b70e203ff026a3362555af05e4a1ab10658dd395f6477959d5e304","0xc4a6cda5290c4f8c07aca740cc657acf2a1277820a0128c148b67c5c9d893455","0x1a24be0632c9090e1beebaaec8f39f00e0cc77bb16c6acd1220652df760b2186","0x0870f72ac4e115923063b89b25fbc2102f64a6ac6d6846d804e9f842231a3c52","0x23badfd848fb3288281ecfcf591c53daeb9a8f11479b9d6f2e9189ff3bb177eb","0x18ab72731238bd92df42db3aacd18e058178b6902b28fbafb020dd339870d520","0xf1b4662246eba818f40601af33192552f311c0d11e7da844b1bea57d4aa03900","0xede7a9d21ec4aedf49bda236a5c7bfe7c593c85d9bf92fa862f790caca3c0cfc","0x79ddbf3973e58554843eb3f222d34a9d6a58e03595963faebbd03651ba81531e","0x80b1c042626c1011067cb44c121a31eb73815542c3b7bd6a6707c72380a4234c","0xf1686ae254307f696f34025f0b830a60c76d9f7f834c02bbcf9dfd6b3e934953","0x255e2ff3cf47a56bb52b80f4348e74269a395e62805815226619f9bd3780b486","0xaecf54a2493810671cf471a27e393023efcbfc8e69337cce3793bfd2e11ab3ab","0x001c51a527a6a24945d69a4fc4e1bc05aff99b6ce9bf4a7df45ed0caaddb5091","0x303f1db5acc1b8d6f5c80b2fc6ae9154c91b44eff353504a8486fc0d7669ff2b","0x0fd1e71c44864f8df1fd38f6d14a4a154ab4b068c81bded1511d8362598d4d63","0x9961c9a4a7c2c975afd8b35fe96b1ca91e6f793a0e98e0ab7cfa1073e2922322","0xe3539c10486cb52e65bddb13aef0024f5c75c8bc6730bf3756e13854bcbbcfcf","0x77d4e78aefd646d349a640d584df4b610bbf2e36d98d31fde2f57f49dc911f33","0x318d1e2d63b7fcf11fb1fd5fd8a777d04a1581e97e0e033e13e893655ed2708f","0x61962150acd51796613e38a5c726d6c1ffebd436c1e8dec60a3e230ca66bb52c","0x3ef62b120cf3cb03f6152a450c0e0e813db2403606519417cc14ab32b6643682","0xc1f373d4998b4bd1ad9f1cb7bcaae0aef9de2378f1e3797272df3045e684d42f","0x859fdcb7e15c7e3da8402a085cf5a8f68e43941c72172f7cc4d4dce734778bcd","0x4063ce2c6063865f01e269cb8cf3bddf9600c72b2bf0c60544a94bcc7fa36270","0xb2c0b8bed6d41a331dba18b926de6a41929eea9712a4caee950cc69cc9ee20ef","0xeb78a889a3a0165e7d1c5dbad414ec1f7fe742f33e4f1efe7e7ccde42f1c5bd1","0xa91aabf7af7258b69695c427818e4a0d1990bef2f237d3eef31be42cc6c9dc34","0x4af10a1a304add597c7a60c9eca425b617c7a26474493c71c6f33f49ef9c34a4","0x65c6bbd7bbdab016e8d83e8e09e0e679a58d3dffc62ce0ff1db000cc67bd7424","0x807497e91a779b7abf6897a42d32d29def4656627d9776cb911bec73ac5e00c6","0xace99cf384d7d047e783a48985cb90b08dac2a49a55563eb5fd561f90d9215cd","0x8af7cbadb4a6a15eedf2d66da9228418ccfda4b5005c61a8364d4d681f63bab0","0x1dcdf45887dae600d098388c10cfbe90c6e0e139b53dcd2f8cbeee9a0d60d386","0xb193e56a5bf6bcb857db2b9fb36ffa3771fac60784e65e7098dd1a9e10a5541f","0xf5b39199bfbd88c147bc20c7e3446ce49cbd7a2e24028f20552c4c991fa367bd","0x52caf249fa270b3cdde16867501e78087d944b3b2236883603c6479c793731e6","0x0971fc590b147519b25a4a7f233dd9f3bbeac298b81d3e5be896ff4e741d33b0","0x06c5ab98a662b78a73cc8a6ba487eb92c21963debf7f72522f6fd43ef7eb6717","0x520a07365c09d8076db191ac368d245bfa6767848f42b172bbc885ad3bfd1bbc","0x31f5114ba735ccd2efd66bb6b0b75b5e43940792d5a6de04579da00809246e8d","0x7db779e74964cbb0c8a0d58c804396d74db7ef1d899a2cef2e9a79e26dbd00b5","0x2066505ce66064a62dda442c465c560f2d541ba25be826a26fa99bb40fc5f48f","0xd8ab63ee5f732c75a74422ac97809a2509eb72e475bf27bd5c2880654b81d6e0","0xbcf4256dc8dfe41158e8579dbef084e518e258c7a50266099ca18d4c706aea09","0x229b51704841cd678b30cb05637ab7328ca7732f3f464fef04cf4225af2d611e","0x8b00af3f43064dc4e592590d3e0a6b0461d543f94484c74c354670ff582d4a7d","0x6e05b31ae0ae0af847c3ee4069e454b37d7508c1cc773e7fa9c0c2952dfb63f8","0x215738a524a1dc44e7f8fb93bd4186d67ca74772a846c2e918f92b16f4f9aae0","0x41c76f54d5664964c356b20bee70c0d7b0afcbcca846f43aa3e59661b1b537ff","0xaa901cc6cd0be6cd7a7342d70462bcab189eb88191af42d7590ece260a71e0de","0x7485ee4879c45fcc62889dd8bca8d7b833bf6ea9dbedab0b72a8109202f447a9","0xfa790f37f88a5e43f524ad6ad33c27eda6014869b51b4fe28b5b26fc083f062e","0x7838539191cadf7cd97f91de17568f19a8e0a8258913ba5a73dc43f6837009b0","0x1b4a29a1f951d43510a2a4eb09c2630c6b42694059c74a80bff09aa3430ad11d","0x44e133a2554ab77019788f854fcd99f34d0339843dd789796889325e24136906","0x1a0ad94c2a6f8271b57239c943b9ffb70df9803fda82dce43d61a84dabad9a94","0x47acb46365eac7e27abfc20dc6079df84bc4766fbfdbab0db4cdeb3e5c7b3c18","0x20a18a178b26d54ebad5b9624c4e8142fe9ad4c68928b147135de640ac6641eb","0xce57ffc73d02f99446cf6fca05ec93a3181f8434fa47cea7875d8d0659025326","0x3d183a043aba5d6aee21f3ef2774a4afc2affe0fb9b30c04c7dad3a07ba5c43d","0x1d029e4c0785c8fcc7ed07be87e07ab8e27996c9c7be7595c549666f291bc37d","0xb0562670b2abbf65fc0355482b4d2579478770407fced59848152b26e16a45bc","0xd8c300600919ec60386fd1f7a9a9d1491268bf932e797fbae92e22a0e0d3d870","0xec2b19b0fe52aa8a415f2c7f0e03172cdfac9f498e6f10d492d408eacbe4af49","0x11d153a72214366ad820174973536885c5a53b47c378f01b0704e4fe6d7289e2","0x7b659e3e8564d1e246e9e024c443aeeb10db9f820ccb389c93890904936f5301"],"difficulty":"0x0","extraData":"0xd883010b04846765746888676f312e32302e32856c696e7578","gasLimit":"0x1c9c380","gasUsed":"0x1c9a7d0","logsBloom":"0xe1f500c004995004205e0bc3a4008fa98e1123f47cd2081410710010d0b721144222d104302663930051004041dc219442c338c007077381853076a400bf73020a3564120444292cca0e816b227c92e441004008074cf821e0dcac02e22001b1c24461205ea027236008b8e400b6e9d511c3007260096e48e0290790c4280844338a21e56a17e86a244b1440e0312810408804c96847818c0429314850da31c00605102f912290281a0030c3164c302a24546252258600089101174c272242724d3044a2a10cd8582d80109185e6de0381e9080000e861dc091371821f466b2236d0642da2538c20800299a200560a12a2110a2c5990074481e21883220a4708","miner":"0x4d496ccc28058b1d74b7a19541663e21154f9c84","mixHash":"0xf570e9f413634790998f5af69d0abcd77db8c83f6f8a94496c1ff9b160e4f2c8","nonce":"0x0000000000000000","parentHash":"0x1469313981cb69286cbfbda5c4e9e02018ca6b091939e99cb888ff3fc5ae8cb7","receiptsRoot":"0x357f0a0a8c1d51fb7bc487e0b2022ebbbad9f3af47fc48ae5c095766c5e4cf72","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","size":"0x13c8b","stateRoot":"0x347343a7b838d95ce12f36f12bdc2bdd9e52ca7f7b83fc82bd3ed3fb72973fdd","timestamp":"0x6410f490","totalDifficulty":"0xa4a470","transactionsRoot":"0x0163a0f504da105424bac01fa7919072af1c3ddc25a041b867f10f5415e7e0b7","uncles":[],"baseFeePerGas":"0xb5b18bb8"}`,
		},
	}
	for _, test := range tests {
		name := test.name
		data := test.data
		t.Run(name, func(t *testing.T) {
			var header rpcHeader
			err := json.Unmarshal([]byte(data), &header)
			require.NoError(t, err, "Should unmarshal data")
			computed := header.computeBlockHash()
			require.Equal(t, header.Hash, computed)
		})
	}

}
